import{_ as S,S as G,a as _,b as z,c as I,d as D,i as k,O as A,e as $,f as K,g as P,h as V,j as u,s as J,T as Q}from"./index-9574e8c1.js";import{o as p,c as v,e as m,i as x,a as Z,r as ee,b as te,d as ie,f as ne,g as se,h as re,j as ae,k as oe,m as le,l as T,n as he,t as M,T as N,p as ce}from"./index-a1f2f6f4.js";var R=function(t){S(e,t);function e(n){var i=t.call(this)||this;return i._value=n,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},e.prototype.getValue=function(){var n=this,i=n.hasError,s=n.thrownError,r=n._value;if(i)throw s;return this._throwIfClosed(),r},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(G),j={now:function(){return(j.delegate||Date).now()},delegate:void 0},ue=function(t){S(e,t);function e(n,i){return t.call(this)||this}return e.prototype.schedule=function(n,i){return this},e}(_),C={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var s=C.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,z([t,e],I(n))):setInterval.apply(void 0,z([t,e],I(n)))},clearInterval:function(t){var e=C.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},de=function(t){S(e,t);function e(n,i){var s=t.call(this,n,i)||this;return s.scheduler=n,s.work=i,s.pending=!1,s}return e.prototype.schedule=function(n,i){var s;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var r=this.id,a=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(a,r,i)),this.pending=!0,this.delay=i,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(a,this.id,i),this},e.prototype.requestAsyncId=function(n,i,s){return s===void 0&&(s=0),C.setInterval(n.flush.bind(n,this),s)},e.prototype.recycleAsyncId=function(n,i,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return i;i!=null&&C.clearInterval(i)},e.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(n,i);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,i){var s=!1,r;try{this.work(n)}catch(a){s=!0,r=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),r},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,s=n.scheduler,r=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,D(r,this),i!=null&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(ue),Y=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(i,n)},t.now=j.now,t}(),ge=function(t){S(e,t);function e(n,i){i===void 0&&(i=Y.now);var s=t.call(this,n,i)||this;return s.actions=[],s._active=!1,s}return e.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var s;this._active=!0;do if(s=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,s){for(;n=i.shift();)n.unsubscribe();throw s}},e}(Y),fe=new ge(de);function me(t){return t&&k(t.schedule)}function ve(t){return t[t.length-1]}function W(t){return me(ve(t))?t.pop():void 0}function q(t,e){return e===void 0&&(e=0),p(function(n,i){n.subscribe(v(i,function(s){return m(i,t,function(){return i.next(s)},e)},function(){return m(i,t,function(){return i.complete()},e)},function(s){return m(i,t,function(){return i.error(s)},e)}))})}function H(t,e){return e===void 0&&(e=0),p(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function pe(t,e){return x(t).pipe(H(e),q(e))}function be(t,e){return x(t).pipe(H(e),q(e))}function ye(t,e){return new A(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function we(t,e){return new A(function(n){var i;return m(n,e,function(){i=t[Z](),m(n,e,function(){var s,r,a;try{s=i.next(),r=s.value,a=s.done}catch(o){n.error(o);return}a?n.complete():n.next(r)},0,!0)}),function(){return k(i==null?void 0:i.return)&&i.return()}})}function U(t,e){if(!t)throw new Error("Iterable cannot be null");return new A(function(n){m(n,e,function(){var i=t[Symbol.asyncIterator]();m(n,e,function(){i.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function xe(t,e){return U(ee(t),e)}function Ee(t,e){if(t!=null){if(te(t))return pe(t,e);if(ie(t))return ye(t,e);if(ne(t))return be(t,e);if(se(t))return U(t,e);if(re(t))return we(t,e);if(ae(t))return xe(t,e)}throw oe(t)}function Ce(t,e){return e?Ee(t,e):x(t)}function Le(t){return t===void 0&&(t=1/0),le($,t)}function Se(){return Le(1)}function X(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Se()(Ce(t,W(t)))}function Ae(t,e){return p(function(n,i){var s=0;n.subscribe(v(i,function(r){return t.call(e,r,s++)&&i.next(r)}))})}function Me(t,e){return e===void 0&&(e=fe),p(function(n,i){var s=null,r=null,a=null,o=function(){if(s){s.unsubscribe(),s=null;var l=r;r=null,i.next(l)}};function c(){var l=a+t,f=e.now();if(f<l){s=this.schedule(void 0,l-f),i.add(s);return}o()}n.subscribe(v(i,function(l){r=l,a=e.now(),s||(s=e.schedule(c,t),i.add(s))},function(){o(),i.complete()},void 0,function(){r=s=null}))})}function Te(t,e){return e===void 0&&(e=$),t=t??ze,p(function(n,i){var s,r=!0;n.subscribe(v(i,function(a){var o=e(a);(r||!t(s,o))&&(r=!1,s=o,i.next(a))}))})}function ze(t,e){return t===e}function Ie(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=W(t);return p(function(i,s){(n?X(t,i,n):X(t,i)).subscribe(s)})}function B(t,e){return p(function(n,i){var s=null,r=0,a=!1,o=function(){return a&&!s&&i.complete()};n.subscribe(v(i,function(c){s==null||s.unsubscribe();var l=0,f=r++;x(t(c,f)).subscribe(s=v(i,function(y){return i.next(e?e(c,y,f,l++):y)},function(){s=null,o()}))},function(){a=!0,o()}))})}class d{constructor(e,n={}){if(!(e instanceof Node))throw"Can't initialize VanillaTilt because "+e+" is not a Node.";this.width=null,this.height=null,this.clientWidth=null,this.clientHeight=null,this.left=null,this.top=null,this.gammazero=null,this.betazero=null,this.lastgammazero=null,this.lastbetazero=null,this.transitionTimeout=null,this.updateCall=null,this.event=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=e,this.settings=this.extendSettings(n),this.reverse=this.settings.reverse?-1:1,this.resetToStart=d.isSettingTrue(this.settings["reset-to-start"]),this.glare=d.isSettingTrue(this.settings.glare),this.glarePrerender=d.isSettingTrue(this.settings["glare-prerender"]),this.fullPageListening=d.isSettingTrue(this.settings["full-page-listening"]),this.gyroscope=d.isSettingTrue(this.settings.gyroscope),this.gyroscopeSamples=this.settings.gyroscopeSamples,this.elementListener=this.getElementListener(),this.glare&&this.prepareGlare(),this.fullPageListening&&this.updateClientSize(),this.addEventListeners(),this.reset(),this.resetToStart===!1&&(this.settings.startX=0,this.settings.startY=0)}static isSettingTrue(e){return e===""||e===!0||e===1}getElementListener(){if(this.fullPageListening)return window.document;if(typeof this.settings["mouse-event-element"]=="string"){const e=document.querySelector(this.settings["mouse-event-element"]);if(e)return e}return this.settings["mouse-event-element"]instanceof Node?this.settings["mouse-event-element"]:this.element}addEventListeners(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.onWindowResizeBind=this.onWindowResize.bind(this),this.onDeviceOrientationBind=this.onDeviceOrientation.bind(this),this.elementListener.addEventListener("mouseenter",this.onMouseEnterBind),this.elementListener.addEventListener("mouseleave",this.onMouseLeaveBind),this.elementListener.addEventListener("mousemove",this.onMouseMoveBind),(this.glare||this.fullPageListening)&&window.addEventListener("resize",this.onWindowResizeBind),this.gyroscope&&window.addEventListener("deviceorientation",this.onDeviceOrientationBind)}removeEventListeners(){this.elementListener.removeEventListener("mouseenter",this.onMouseEnterBind),this.elementListener.removeEventListener("mouseleave",this.onMouseLeaveBind),this.elementListener.removeEventListener("mousemove",this.onMouseMoveBind),this.gyroscope&&window.removeEventListener("deviceorientation",this.onDeviceOrientationBind),(this.glare||this.fullPageListening)&&window.removeEventListener("resize",this.onWindowResizeBind)}destroy(){clearTimeout(this.transitionTimeout),this.updateCall!==null&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null}onDeviceOrientation(e){if(e.gamma===null||e.beta===null)return;this.updateElementPosition(),this.gyroscopeSamples>0&&(this.lastgammazero=this.gammazero,this.lastbetazero=this.betazero,this.gammazero===null?(this.gammazero=e.gamma,this.betazero=e.beta):(this.gammazero=(e.gamma+this.lastgammazero)/2,this.betazero=(e.beta+this.lastbetazero)/2),this.gyroscopeSamples-=1);const n=this.settings.gyroscopeMaxAngleX-this.settings.gyroscopeMinAngleX,i=this.settings.gyroscopeMaxAngleY-this.settings.gyroscopeMinAngleY,s=n/this.width,r=i/this.height,a=e.gamma-(this.settings.gyroscopeMinAngleX+this.gammazero),o=e.beta-(this.settings.gyroscopeMinAngleY+this.betazero),c=a/s,l=o/r;this.updateCall!==null&&cancelAnimationFrame(this.updateCall),this.event={clientX:c+this.left,clientY:l+this.top},this.updateCall=requestAnimationFrame(this.updateBind)}onMouseEnter(){this.updateElementPosition(),this.element.style.willChange="transform",this.setTransition()}onMouseMove(e){this.updateCall!==null&&cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.updateBind)}onMouseLeave(){this.setTransition(),this.settings.reset&&requestAnimationFrame(this.resetBind)}reset(){this.onMouseEnter(),this.fullPageListening?this.event={clientX:(this.settings.startX+this.settings.max)/(2*this.settings.max)*this.clientWidth,clientY:(this.settings.startY+this.settings.max)/(2*this.settings.max)*this.clientHeight}:this.event={clientX:this.left+(this.settings.startX+this.settings.max)/(2*this.settings.max)*this.width,clientY:this.top+(this.settings.startY+this.settings.max)/(2*this.settings.max)*this.height};let e=this.settings.scale;this.settings.scale=1,this.update(),this.settings.scale=e,this.resetGlare()}resetGlare(){this.glare&&(this.glareElement.style.transform="rotate(180deg) translate(-50%, -50%)",this.glareElement.style.opacity="0")}getValues(){let e,n;this.fullPageListening?(e=this.event.clientX/this.clientWidth,n=this.event.clientY/this.clientHeight):(e=(this.event.clientX-this.left)/this.width,n=(this.event.clientY-this.top)/this.height),e=Math.min(Math.max(e,0),1),n=Math.min(Math.max(n,0),1);let i=(this.reverse*(this.settings.max-e*this.settings.max*2)).toFixed(2),s=(this.reverse*(n*this.settings.max*2-this.settings.max)).toFixed(2),r=Math.atan2(this.event.clientX-(this.left+this.width/2),-(this.event.clientY-(this.top+this.height/2)))*(180/Math.PI);return{tiltX:i,tiltY:s,percentageX:e*100,percentageY:n*100,angle:r}}updateElementPosition(){let e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}update(){let e=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+(this.settings.axis==="x"?0:e.tiltY)+"deg) rotateY("+(this.settings.axis==="y"?0:e.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")",this.glare&&(this.glareElement.style.transform=`rotate(${e.angle}deg) translate(-50%, -50%)`,this.glareElement.style.opacity=`${e.percentageY*this.settings["max-glare"]/100}`),this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:e})),this.updateCall=null}prepareGlare(){if(!this.glarePrerender){const e=document.createElement("div");e.classList.add("js-tilt-glare");const n=document.createElement("div");n.classList.add("js-tilt-glare-inner"),e.appendChild(n),this.element.appendChild(e)}this.glareElementWrapper=this.element.querySelector(".js-tilt-glare"),this.glareElement=this.element.querySelector(".js-tilt-glare-inner"),!this.glarePrerender&&(Object.assign(this.glareElementWrapper.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden","pointer-events":"none","border-radius":"inherit"}),Object.assign(this.glareElement.style,{position:"absolute",top:"50%",left:"50%","pointer-events":"none","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}),this.updateGlareSize())}updateGlareSize(){if(this.glare){const e=(this.element.offsetWidth>this.element.offsetHeight?this.element.offsetWidth:this.element.offsetHeight)*2;Object.assign(this.glareElement.style,{width:`${e}px`,height:`${e}px`})}}updateClientSize(){this.clientWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.clientHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}onWindowResize(){this.updateGlareSize(),this.updateClientSize()}setTransition(){clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+"ms "+this.settings.easing,this.glare&&(this.glareElement.style.transition=`opacity ${this.settings.speed}ms ${this.settings.easing}`),this.transitionTimeout=setTimeout(()=>{this.element.style.transition="",this.glare&&(this.glareElement.style.transition="")},this.settings.speed)}extendSettings(e){let n={reverse:!1,max:15,startX:0,startY:0,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:1,speed:300,transition:!0,axis:null,glare:!1,"max-glare":1,"glare-prerender":!1,"full-page-listening":!1,"mouse-event-element":null,reset:!0,"reset-to-start":!0,gyroscope:!0,gyroscopeMinAngleX:-45,gyroscopeMaxAngleX:45,gyroscopeMinAngleY:-45,gyroscopeMaxAngleY:45,gyroscopeSamples:10},i={};for(var s in n)if(s in e)i[s]=e[s];else if(this.element.hasAttribute("data-tilt-"+s)){let r=this.element.getAttribute("data-tilt-"+s);try{i[s]=JSON.parse(r)}catch{i[s]=r}}else i[s]=n[s];return i}static init(e,n){e instanceof Node&&(e=[e]),e instanceof NodeList&&(e=[].slice.call(e)),e instanceof Array&&e.forEach(i=>{"vanillaTilt"in i||(i.vanillaTilt=new d(i,n))})}}typeof document<"u"&&(window.VanillaTilt=d,d.init(document.querySelectorAll("[data-tilt]")));const Pe=t=>t.replace(/\s+/g," ").trim();function Ye(t,e){e===void 0&&(e={});var n=e.selector,i=K(e,["selector"]);return new A(function(s){var r=new AbortController,a=r.signal,o=!0,c=i.signal;if(c)if(c.aborted)r.abort();else{var l=function(){a.aborted||r.abort()};c.addEventListener("abort",l),s.add(function(){return c.removeEventListener("abort",l)})}var f=P(P({},i),{signal:a}),y=function(E){o=!1,s.error(E)};return fetch(t,f).then(function(E){n?x(n(E)).subscribe(v(s,void 0,function(){o=!1,s.complete()},y)):(o=!1,s.next(E),s.complete())}).catch(y),function(){o&&r.abort()}})}const Xe=()=>"https://espeon-api.onrender.com/api/v1",Be=t=>{if("loading"in t)return{loading:!0,error:!1};if("message"in t){const{message:s}=t;return{error:!0,message:s,loading:!1}}const{cards:e,totalPages:n}=t;return{error:!1,cards:e,loading:!1,totalPages:n}},Oe=({cardName:t,page:e=1,pageSize:n=20})=>{const i=`${Xe()}/cards/${t}?page=${e}&pageSize=${n}`;return encodeURI(i)},ke=({cardName:t,page:e,pageSize:n})=>Ye(Oe({cardName:t,page:e,pageSize:n}),{selector:i=>i.json()}).pipe(Ie({loading:!0}),T(Be)),$e=({images:t,...e})=>({imageURL:t.large,...e}),Ne="/espeon/assets/pokeball-bg-6e39d939.svg",Re="/espeon/assets/pokeball-slice-top-3f25a6fa.svg",je="/espeon/assets/pokeball-slice-bottom-ecbb3cef.svg",We=document.querySelector("#search-input"),w=document.querySelector("#cards-container"),b=document.querySelector("#background-container"),h=document.querySelector("dialog"),g=document.querySelector("#modal-container");h==null||h.addEventListener("click",()=>{h==null||h.close()});g==null||g.addEventListener("click",t=>{t.stopPropagation()});const qe=()=>{h==null||h.close()},He=t=>{ce(t),h==null||h.close(),J({type:Q.SUCCESS,message:"Card added to your deck!"})},Ue=t=>{const{imageURL:e,name:n,types:i}=t,s=(i==null?void 0:i[0])??N.Colorless;if(!g)return;g.className=`modal-${s.toLowerCase()}`;const r=u({tagName:"div",attributes:{id:"modal-header"}}),a=u({tagName:"button",attributes:{id:"modal-close-button",title:"Close modal"}});a.onclick=qe;const o=u({tagName:"i",attributes:{class:"ph-x"}});a.appendChild(o),r.appendChild(a);const c=u({tagName:"img",attributes:{src:e,class:"modal-image",alt:`Card ${n}`}}),l=u({tagName:"button",attributes:{id:"modal-add-card-button"}});l.onclick=()=>{He(t)},l.textContent="Add to deck",g.innerHTML="",g.appendChild(r),g.appendChild(c),g.appendChild(l)},Fe=t=>{Ue(t),h==null||h.showModal()},L=new R({page:1}),F=new R({totalPages:void 0}),Ge=he(We,"input"),O=new IntersectionObserver(t=>{if(t.some(e=>e.isIntersecting)){const{value:{page:e}}=L,{value:{totalPages:n}}=F;(!n||e<n)&&L.next({page:e+1})}}),_e=({name:t,imageURL:e,types:n})=>{const i=(n==null?void 0:n[0])??N.Colorless,s=u({tagName:"button",attributes:{class:`card ${i.toLowerCase()}`,title:t}}),r=u({tagName:"img",attributes:{src:e,alt:`Card ${t}`}});return s.appendChild(r),s},De=()=>{const t=u({tagName:"img",attributes:{id:"pokeball-bg",src:Ne}});w&&(b==null||b.replaceChildren(t),w.innerHTML="")},Ke=t=>{t.forEach((e,n)=>{const i=_e(e);if(i.onclick=()=>{Fe(e)},!w)return;const s=w.lastElementChild,r=t.length-1===n;s&&O.unobserve(s),r&&O.observe(i),w.appendChild(i),!V()&&d.init(i,{glare:!0,"max-glare":.5})})},Ve=t=>{const e=document.querySelector("#pokeball-bg");if(!t){e==null||e.classList.remove("rotation-animation");return}e==null||e.classList.add("rotation-animation")},Je=t=>{const e=u({tagName:"img",attributes:{src:Re}}),n=u({tagName:"img",attributes:{src:je}}),i=u({tagName:"span"});i.innerHTML=t!=null&&t.length?t:`Oops, something wrong happened :( <br />
  Try to search for another card or try later.`,b==null||b.replaceChildren(e,i,n)},Qe=Ge.pipe(T(t=>t.target.value||""),T(Pe),Me(1e3),Te(),M(De),Ae(t=>!!t),M(()=>{L.next({page:1})}),B(t=>L.pipe(B(({page:e})=>ke({cardName:t,page:e})))),M(({totalPages:t})=>{t&&F.next({totalPages:t})}));Qe.subscribe(({cards:t,loading:e,error:n,message:i})=>{if(Ve(e),n){Je(i);return}const s=(t==null?void 0:t.map($e))??[];Ke(s)});
